---
title: "alacrittyã‚ˆã‚Šã‚‚é€Ÿã„ã‚¿ãƒ¼ãƒŸãƒŠãƒ«foot"
emoji: "ğŸ¦¶ğŸ»"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [terminal]
published: false
---
:::message
footã¯waylandç”¨ã«ä½œã‚‰ã‚ŒãŸã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã§ã™ã€‚macã®æ–¹ã€xorgç’°å¢ƒã®æ–¹ã¯ä½¿ãˆãªã„ã‚“ã˜ã‚ƒãªã„ã‹ã¨æ€ã„ã¾ã™ã€‚
:::

alacrittyã‹ã‚‰ä¹—ã‚Šæ›ãˆã¦footã¨ã„ã†ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’ã—ã°ã‚‰ãä½¿ã£ã¦ã„ã¾ã™ã€‚zennã«ç´¹ä»‹è¨˜äº‹ãŒãªã•ãã†ã ã£ãŸã®ã§ã€åˆã‚ã¦ã§ã™ãŒè¨˜äº‹ã‚’æ›¸ã„ã¦ã¿ã‚ˆã†ã¨æ€ã„æ›¸ã„ã¦ã„ã¾ã™ã€‚

ã“ã®è¨˜äº‹ã¯README, wikiã‚’èª­ã‚“ã§ã€Œã¯ãˆï½ãªã‚‹ã»ã©ã€ã¨æ€ã£ãŸéƒ¨åˆ†ã€footã‚’ä½¿ã£ã¦ã¿ã¦æ°—ã«å…¥ã£ãŸãƒã‚¤ãƒ³ãƒˆã€ãã—ã¦å°å­¦ç”Ÿä¸¦ã¿ã®æ„Ÿæƒ³ã‹ã‚‰æˆã£ã¦ã„ã¾ã™ã€‚ã”äº†æ‰¿ãã ã•ã„ã€‚

# foot ã¨ã¯

@[card](https://codeberg.org/dnkl/foot)

GPUã‚’ä½¿ã‚ãªã„ã«ã‚‚é–¢ã‚ã‚‰ãšè¶…é«˜é€Ÿã®Cè¨€èªè£½ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã§ã™ã€‚

# footãŒé€Ÿã„ç†ç”±

[wiki](https://codeberg.org/dnkl/foot/wiki/Performance)ã«ã‚ˆã‚‹ã¨é€Ÿã•ã®ä¸»ãªç†ç”±ã¯2ã¤ã§ã™ã€‚

## é€Ÿã„ç†ç”±1:VT parserãŒéå¸¸ã«é«˜é€Ÿ

VT parserã¯ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã®ãƒ‘ãƒ¼ã‚µãƒ¼ã§ã™ã€‚
å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«footã¨ãã®ä»–ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿(alacritty,urxvt,xterm)ã®vtebenchçµæœã‚’æ¯”è¼ƒã™ã‚‹[è¡¨](https://codeberg.org/dnkl/foot/src/branch/master/doc/benchmark.md)ãŒæ²è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚footã®å„é …ç›®ã®ã‚¹ã‚³ã‚¢ã¯alacrittyã‚’å¤§å¹…ã«ä¸Šå›ã‚‹ã‹åŒç¨‹åº¦ã¨ãªã£ã¦ãŠã‚Šã€å¤§ããåŠ£ã‚‹é …ç›®ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
footãŒã„ãã¤ã‹ã®é …ç›®ã«ãŠã„ã¦éå¸¸ã«é«˜é€Ÿã§ã‚ã‚‹ä¸»ãªç†ç”±ãŒVT parserã®é€Ÿã•ãªã®ã ãã†ã§ã™ã€‚
vtebenchã¯PTYã®èª­ã¿å–ã‚Šé€Ÿåº¦ã‚’æ¸¬ã‚‹ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ãªã®ã§ã€ãƒ‘ãƒ¼ã‚µãƒ¼ãŒé«˜é€Ÿã ã¨ã„ã†ã®ã¯ç¢ºã‹ã«åŠ¹ã„ã¦ãã‚‹éƒ¨åˆ†ãªã®ã§ã—ã‚‡ã†ã€‚

## é€Ÿã„ç†ç”±2:å·®åˆ†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°

footã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚¨ãƒ³ã‚¸ãƒ³ã¯ç”»é¢å†…ã§å¤‰åŒ–ãŒã‚ã£ãŸé ˜åŸŸã®ã¿å†æç”»ã™ã‚‹å·®åˆ†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’è¡Œã„ã¾ã™ã€‚ 1æ–‡å­—ã€1è¡Œã ã‘ã®å¤‰æ›´ã‚„ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«^[ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã¯ç”»é¢å…¨ä½“ãŒå‹•ãã®ã§ç´ æœ´ã«ã¯å…¨ä½“ã®æ›´æ–°ã¨ãªã£ã¦ã—ã¾ã„ã¾ã™ãŒã€footã¯æ—¢å­˜ã®è¡¨ç¤ºã‚’ç§»å‹•ã•ã›ã¦è¿½åŠ ã®è¡Œã ã‘ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚]ãªã©ã«ãŠã„ã¦åŠ¹æœã¯çµ¶å¤§ã§ã€alacrittyã‚ˆã‚Šã‚‚åœ§å€’çš„ã«é€Ÿãæç”»ã—ã¦ãã‚Œã¾ã™ã€‚
ç”»é¢å…¨ä½“ã«æ›´æ–°ãŒç™ºç”Ÿã—ãŸå ´åˆã¯alacrittyã«åŠ£ã‚Šã¾ã™ãŒã€å…¨ä½“ã®å†æç”»ã¯ãã“ã¾ã§å¤šããªã„ã®ã§ã€å®Ÿç”¨ä¸Šalacrittyã‚ˆã‚Šé«˜é€Ÿã§ã™ã€‚(alacrittyã®ç”»é¢æç”»ã¯å°ã•ãªå¤‰æ›´ã§ã‚‚ç”»é¢å…¨ä½“ã‚’å†æç”»ã—ã¾ã™ã€‚)

ãã‚‚ãã‚‚ã€ç”»é¢å…¨ä½“ã‚’æ›¸ãæ›ãˆã‚‹ã‚ˆã†ãªã‚¤ãƒ™ãƒ³ãƒˆã¯ãã®ã‚¤ãƒ™ãƒ³ãƒˆè‡ªä½“ãŒãã“ãã“æ™‚é–“ãŒã‹ã‹ã£ã¦ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã®æç”»æ™‚é–“ã¯èª¤å·®ã«ãªã‚‹ã‚ˆã†ãªæ°—ãŒã—ã¾ã™ã€‚

# footã®è‰¯ã„ã¨ã“ã‚ã€æ°—ã«å…¥ã£ã¦ã„ã‚‹ã¨ã“ã‚

## 1.ã‚µãƒ¼ãƒãƒ¼/ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ¢ãƒ¼ãƒ‰ãŒã‚ã‚‹
ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã—ã¦ãŠãã“ã¨ã§çœãƒ¡ãƒ¢ãƒªãƒ¼ã¨çˆ†é€Ÿèµ·å‹•ã‚’å®Ÿç¾ã™ã‚‹ã‚„ã¤ã§ã™ã€‚(urxvtã®ãƒ‡ãƒ¼ãƒ¢ãƒ³/ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ¢ãƒ¼ãƒ‰ç›¸å½“)

# æç”»é€Ÿåº¦å®Ÿé¨“

footã¨alacrittyã®æç”»é€Ÿåº¦ãŒæ‰‹å…ƒã®ç’°å¢ƒã§ã©ã‚Œãã‚‰ã„é•ã†ã‹ç¢ºã‹ã‚ã¦ã¿ã¾ã—ãŸã€‚

## ç’°å¢ƒ

CPU: Core i5-8250U
OS: Arch linux

```
â¯ foot --version
foot version: 1.13.1 +pgo +ime +graphemes -assertions

â¯ alacritty --version
alacritty 0.10.1 ()

â¯ sway --version
sway version 1.7
```

## ã‚¶ãƒ¼ã£ã¨æ–‡å­—ãŒæµã‚Œã¦ã„ãã¨ãã®æ€§èƒ½

```sh
exa -lR /usr > result
```

ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã£ã¦ã€

```sh
hyperfine -r 10 --show-output -N "cat result"
```

ã‚’ãã‚Œãã‚Œå®Ÿè¡Œã—ã¾ã—ãŸã€‚

### ã¨ã‚Šã‚ãˆãšãã®ã¾ã¾ã§

![](https://github.com/fuzmare/zenn-articles/blob/main/articles/foot-terminal/cat-raw.png?raw=true)

foot: 284.4 ms Â± 16.2 ms
alacritty: 567.8 ms Â± 33.5 ms

footãŒ2å€ã»ã©é€Ÿã„ã§ã™ã€‚ç”»é¢ã‚’æµã‚Œã¦ã„ãã‚ˆã†ãªè¡¨ç¤ºã«ã¯æ»…æ³•å¼·ã„ã®ãŒè¦‹ã¦å–ã‚Œã¾ã™ã€‚

### tmuxä¸Šã§

![](https://github.com/fuzmare/zenn-articles/blob/main/articles/foot-terminal/cat-tmux.png?raw=true)

foot: 1.608 s Â± 0.015 s
alacritty: 1.583 s Â± 0.046 s

ä¸¡è€…å¤§å¹…ã«é€Ÿåº¦ãŒä½ä¸‹ã—ã¾ã™ã€‚
footã®æ–¹ãŒalacrittyã‚ˆã‚Šåƒ…å·®ã§ã™ãŒé…ããªã‚Šã¾ã—ãŸã€‚ä½•åº¦ã‹ã‚„ã£ã¦ã‚‚åŒã˜ã ã£ãŸã®ã§å¶ç„¶ã§ã¯ãªã„ã‚ˆã†ã§ã™ã€‚
footè‡ªå‰ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§ã¯ãªãtmuxå´ãŒã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’è¡Œãªã£ã¦ã„ã‚‹ã“ã¨ãŒå·®åˆ†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã®æ€§èƒ½ã‚’ä¸‹ã’ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚render-timerã‚’è¡¨ç¤ºã—ã¦å®Ÿè¡Œã—ã¦ã¿ãŸã¨ã“ã‚ç”»é¢å…¨ä½“ã®å†æç”»ã‚ˆã‚Šã¯é«˜é€Ÿã«æç”»ã§ãã¦ã‚‹ã£ã½ã‹ã£ãŸã®ã§ç„¡åŠ¹ã«ãªã£ã¦ã„ã‚‹ã‚ã‘ã§ã¯ãªã•ãã†ã€‚

### zellijä¸Šã§

![](https://github.com/fuzmare/zenn-articles/blob/main/articles/foot-terminal/cat-zellij.png?raw=true)

foot: 1.198 s Â± 0.019 s
alacritty: 1.121 s Â± 0.015 s

tmuxã®ã¨ãã¨åŒã˜å‚¾å‘ã§ã™ãŒã€tmuxã»ã©æ€§èƒ½ãŒè½ã¡ã¦ã„ã¾ã›ã‚“ã€‚zellijã®æ–¹ãŒé€Ÿã„ã‚‰ã—ã„ã€‚
~~ã§ã‚‚zellijã‚ã‚“ã¾ã‚Šå¥½ãã˜ã‚ƒãªã„ã€‚~~

## vimã—ã¦ã‚‹ã¨ãã®æ€§èƒ½

render-timerã‚’ä½¿ã£ã¦æç”»ã«ã‹ã‹ã£ãŸæ™‚é–“ã‚’è¦‹ã¾ã—ãŸã€‚
vimã¨è¨€ã„ã¤ã¤neovimã‚’ä½¿ã£ãŸã®ã§ã™ãŒã¾ã‚è¦‹ã‚‹ã®ã¯render-timerã®æ™‚é–“ãªã®ã§ã©ã‚“ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ã£ãŸã‹ã§ãã†é•ã£ãŸã‚Šã¯ã—ãªã„ã§ã—ã‚‡ã†ã€‚

### 1æ–‡å­—æ‰“ã¤

ç©ºã®ãƒãƒƒãƒ•ã‚¡ãƒ¼ã«"a"ã¨1æ–‡å­—æ‰“ã¡ã¾ã—ãŸã€‚
![](https://github.com/fuzmare/zenn-articles/blob/main/articles/foot-terminal/vim-ia.png?raw=true)

foot: 260.91 Âµs
alacritty: 1338.148 Âµs

footãŒalacrittyã‚ˆã‚Š5å€ã‚‚é€Ÿããªã£ã¦ã„ã¾ã™ã€‚
ã‚„ã¯ã‚Šå·®åˆ†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¯å¤‰åŒ–é‡ãŒå°ã•ã„ã¨ãã®åŠ¹æœãŒçµ¶å¤§ã§ã™ã€‚

### 1è¡Œã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã™ã‚‹

å…ˆã®å®Ÿé¨“ã§ä½œã£ãŸ/usrä»¥ä¸‹ã®ä¸€è¦§ã‚’ä½¿ã„ã¾ã—ãŸã€‚
![](https://github.com/fuzmare/zenn-articles/blob/main/articles/foot-terminal/vim-1C^e.png?raw=true)

foot: 734.15 Âµs
alacritty: 1329.285 Âµs

### 2è¡Œä»¥ä¸Šã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã™ã‚‹

footã¯ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã™ã‚‹è¡Œæ•°ãŒå¢—ãˆã‚‹ã»ã©ä¸åˆ©ãªã®ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«è¡Œæ•°ã‚’å¢—ã‚„ã—ã¦ã„ã£ãŸã¨ãã®å¤‰åŒ–ã‚’ç¢ºèªã—ã¾ã™ã€‚

2è¡Œ
![](https://github.com/fuzmare/zenn-articles/blob/main/articles/foot-terminal/vim-2C^e.png?raw=true)

3è¡Œ
![](https://github.com/fuzmare/zenn-articles/blob/main/articles/foot-terminal/vim-3C^e.png?raw=true)

4è¡Œ
![](https://github.com/fuzmare/zenn-articles/blob/main/articles/foot-terminal/vim-4C^e.png?raw=true)

5è¡Œ
![](https://github.com/fuzmare/zenn-articles/blob/main/articles/foot-terminal/vim-5C^e.png?raw=true)

6è¡Œ
![](https://github.com/fuzmare/zenn-articles/blob/main/articles/foot-terminal/vim-6C^e.png?raw=true)

### 1è¡Œæ¶ˆã—ã¦ã¿ã‚‹

dd ã§ä¸€è¡Œæ¶ˆã—ã¾ã—ãŸã€‚
![](https://github.com/fuzmare/zenn-articles/blob/main/articles/foot-terminal/vim-dd.png?raw=true)

foot: 1946.93 Âµs
alacritty: 1469.813 Âµs

### ç”»é¢å…¨ä½“ã®å¤‰åŒ–

G ã§ä¸€ç•ªä¸‹ã«è¡Œãã¾ã—ãŸã€‚
![](https://github.com/fuzmare/zenn-articles/blob/main/articles/foot-terminal/vim-G.png?raw=true)

foot: 2505.03 Âµs
alacritty: 1168.534 Âµs

